{% extends 'base.html' %}

{% block title %}
    Meus Hábitos
{% endblock %}

{% block content %}
    <hgroup>
        <h1>Meu Sistema de Hábitos</h1>
        <h2>Um passo de cada vez para uma vida melhor.</h2>
    </hgroup>

    <article>
        <header>
            <strong>Adicionar Novo Hábito</strong>
        </header>
        <form action="{{ url_for('routes.add_habit') }}" method="POST">
            <input type="text" name="habit_name" placeholder="Ex: Ler 10 páginas de um livro" required>
            <button type="submit">Adicionar Hábito</button>
        </form>
    </article>

    <article>
        <header>
            <strong>Meus Hábitos</strong>
        </header>
        {% if habits %}
            <ul>
                {% for habit in habits %}
                    <li>
                        {{ habit.nome }}
                        <span style="float: right;">
                            {% if habit.id in habitos_concluidos_hoje %}
                                <a role="button" class="secondary outline btn-sm" style="pointer-events: none; border-color: green; color: green;">
                                    ✅ Concluído
                                </a>
                            {% else %}
                                <a href="{{ url_for('routes.complete_habit', habit_id=habit.id) }}" role="button" class="secondary outline btn-sm">
                                    Concluir
                                </a>
                            {% endif %}
                            <a href="{{ url_for('routes.delete_habit', habit_id=habit.id) }}" role="button" class="contrast outline btn-sm">
                                Excluir
                            </a>
                        </span>
                        <br>
                        <small>Criado em: {{ habit.data_criacao.strftime('%d/%m/%Y') }}</small>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Nenhum hábito cadastrado ainda. Comece adicionando um acima!</p>
        {% endif %}
    </article>
{% endblock %}